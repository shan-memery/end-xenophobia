<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <link rel="stylesheet" href="css/styles.css">
    <title>Articles | End Xenophobia Against Asians</title>
  </head>
  <body>

    <div id="navbar"></div>

    <div id="page-container">
      <div class="title">
        Articles
      </div>

      <div id="border">
        Test
      </div>
    </div>

    <footer id="footer"></footer>

    <script src="js/useAPI.js"></script>
    <script>
     ["https://www.unicefusa.org/stories/5-ways-fight-racism-and-xenophobia/34567",
      "https://greatergood.berkeley.edu/article/item/antiracist_resources_from_greater_good",
      "https://www.washington.edu/raceequity/resources/anti-racism-resources/"]
       .forEach(link => useAPI(link)
         .then(res=> res.text())
         .then(data => data.split("\n"))
         .then(lines =>
           ["title", "description", "image"]
             .map((attribute) => lines.filter(item => {
               const regex = new RegExp(`og:${attribute}`, 'gi');
               return item.match(regex)
             })))
         .then(relevantOgs => relevantOgs.map(relevantOg => relevantOg[0]))
         .then((stringifiedMetas) =>{
           parser = new DOMParser()
           return stringifiedMetas
             .map(stringifiedMeta => parser
               .parseFromString(stringifiedMeta, "text/xml")
               .childNodes[0]
               .getAttribute("content"))
         })
    </script>

    <script src="js/includes.js"></script>
    <script>
     includes(['navbar', 'footer']);
    </script>
  </body>
</html>
